---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# layers

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Travis build status](https://travis-ci.com/jfkingiii/layers.svg?branch=master)](https://travis-ci.com/jfkingiii/layers)
[![Codecov test coverage](https://codecov.io/gh/jfkingiii/layers/branch/master/graph/badge.svg)](https://codecov.io/gh/jfkingiii/layers?branch=master)
<!-- badges: end -->

The goal of layers is to provide a simple library for doing common reinsurance calculations outside of Analyze Re.

## Installation

You can install the development version of `layers` from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("jfkingiii/layers")
```
## Example

Use the included sample yelt, `yelt_test` to try out some of the `layers` functions.

```{r example}
library(layers)

# Look at the help files
help(package = layers)

# Create some layers and get their metrics
options(scipen = 999)
test_layer <- layer(4000000, 1000000, 1, "yelt_test", lobs=c("PHYSICIANS","CHC","MEDCHOICE"))
gross_layer <- layer(UNLIMITED, 0, 1, "yelt_test", lobs=c("PHYSICIANS","CHC","MEDCHOICE","HOSPITAL"))
# Aggregate limits and deductibles are optional and default to UNLIMITED and 0.
test_layer

gross_layer

summary(test_layer)

summary(gross_layer)

# Test some OEPs
VaR(gross_layer, 5, "OEP")
VaR(gross_layer, 10, "OEP")
VaR(test_layer, 15, "OEP")
VaR(test_layer, 20, "OEP")

# Try a layer with aggregate parameters
agg_layer <- layer(4000000, 1000000, 1, "yelt_test", lobs=c("PHYSICIANS","CHC","MEDCHOICE"),
                   agg_attachment = 4000000, agg_limit = 12000000)
summary(agg_layer)

# Portolio expected losses
layer1 <- layer(1000000, 4000000, 1, "yelt_test", lobs="PHYSICIANS")
layer2 <- layer(5000000, 5000000, 1, "yelt_test", lobs="PHYSICIANS")
layer3 <- layer(1000000, 10000000, 1, "yelt_test", lobs="PHYSICIANS")
P <- portfolio(layer1, layer2, layer3)

expected(layer1) + expected(layer2) + expected(layer3)
expected(P)
```
